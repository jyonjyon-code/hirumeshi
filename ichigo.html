<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãã¿ã¯ä»Šæ—¥ã„ã¡ã”ã‚’é£Ÿã¹ãŸã‹ | ä»Šæ—¥ã‚¤ãƒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body { font-family: 'Zen Maru Gothic', sans-serif; text-align: center; background: #fff5f6; padding: 20px; color: #4a1a1a; margin: 0; }
        .card { background: white; padding: 25px; border-radius: 30px; box-shadow: 0 10px 30px rgba(255,100,120,0.15); display: inline-block; width: 95%; max-width: 400px; border: 4px solid #ff4d6d; box-sizing: border-box; }
        .main-title { color: #ff4d6d; font-size: 20px; margin-bottom: 5px; font-weight: 900; line-height: 1.4; }
        .sub-nickname { font-size: 28px; color: #ff4d6d; margin-bottom: 20px; display: block; font-weight: 900; background: #fff0f3; border-radius: 10px; padding: 5px; }
        .counter-group { background: #fffcfc; border-radius: 20px; padding: 15px; margin-bottom: 10px; border: 1px solid #ffe5e9; }
        .item-row { display: flex; align-items: center; justify-content: space-between; margin: 15px 0; padding-bottom: 10px; border-bottom: 1px dashed #ffe5e9; }
        .item-row:last-child { border-bottom: none; }
        .item-label { font-size: 15px; font-weight: bold; flex-grow: 1; text-align: left; }
        .sweet-select { font-family: 'Zen Maru Gothic', sans-serif; font-size: 12px; padding: 5px; border-radius: 8px; border: 1px solid #ff4d6d; margin-top: 5px; width: 100%; color: #4a1a1a; background: white; }
        .controls { display: flex; align-items: center; gap: 5px; }
        .btn-plus { width: 40px; height: 40px; border-radius: 50%; border: none; background: #ff4d6d; color: white; font-size: 20px; cursor: pointer; font-weight: bold; box-shadow: 0 3px 0 #c92a42; }
        .btn-minus { width: 32px; height: 32px; border-radius: 50%; border: 2px solid #ff4d6d; background: white; color: #ff4d6d; font-size: 18px; cursor: pointer; font-weight: bold; }
        .btn-main { background: #ff4d6d; color: white; border: none; padding: 15px 30px; border-radius: 50px; cursor: pointer; font-weight: bold; font-size: 18px; width: 100%; margin-top: 15px; box-shadow: 0 4px 0 #c92a42; transition: 0.2s; }
        .btn-main:active { transform: translateY(2px); box-shadow: 0 2px 0 #c92a42; }
        #judgment-area { display: none; margin-top: 20px; padding: 20px; background: #fffbf0; border-radius: 20px; border: 2px dashed #ff4d6d; animation: pop 0.4s; }
        @keyframes pop { from { transform: scale(0.9); } to { transform: scale(1); } }
        .shogo { font-size: 22px; font-weight: 900; color: #ff4d6d; }
        .rakuten-area { margin-top: 15px; padding: 15px; border-radius: 15px; display: none; border: 2px solid transparent; }
        .rakuten-link { color: white; font-weight: bold; text-decoration: none; font-size: 14px; display: block; padding: 10px; border-radius: 10px; box-shadow: 0 4px 0 rgba(0,0,0,0.1); }
        .rank-gold { background: #fff9e6; border-color: #ffd700; }
        .rank-gold .rakuten-link { background: #d4af37; }
        .rank-normal { background: #fff0f0; border-color: #ffccd5; }
        .rank-normal .rakuten-link { background: #ff4d6d; }
        .btn-share { background: #000; color: white; border: none; padding: 12px; border-radius: 25px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 8px; text-decoration: none; }
        .btn-nav { display: block; margin-top: 20px; color: #ff4d6d; text-decoration: none; font-size: 14px; font-weight: bold; border: 2px solid #ff4d6d; padding: 10px; border-radius: 15px; background: white; }
    </style>
</head>
<body>
<div class="card">
    <div class="main-title">ãã¿ã¯ä»Šæ—¥<br>ã„ã¡ã”ã‚’é£Ÿã¹ãŸã‹</div>
    <div class="sub-nickname">ä»Šæ—¥ã‚¤ãƒ</div>

    <div class="counter-group">
        <div class="item-row"><div class="item-label">ğŸ“ ç”Ÿã®ã„ã¡ã”</div><div class="controls"><button class="btn-minus" onclick="change('raw', -1)">âˆ’</button><span class="count-num" id="raw-count">0</span><button class="btn-plus" onclick="change('raw', 1)">ï¼‹</button></div></div>
        <div class="item-row"><div class="item-label">ğŸ¥„ ã‚¸ãƒ£ãƒ (æ¯)</div><div class="controls"><button class="btn-minus" onclick="change('jam', -1)">âˆ’</button><span class="count-num" id="jam-count">0</span><button class="btn-plus" onclick="change('jam', 1)">ï¼‹</button></div></div>
        <div class="item-row" style="flex-direction: column; align-items: flex-start;">
            <div style="display: flex; width: 100%; justify-content: space-between; align-items: center;">
                <div class="item-label">ğŸ° ã‚¹ã‚¤ãƒ¼ãƒ„ç³»</div>
                <div class="controls"><button class="btn-minus" onclick="change('sweet', -1)">âˆ’</button><span class="count-num" id="sweet-count">0</span><button class="btn-plus" onclick="change('sweet', 1)">ï¼‹</button></div>
            </div>
            <select id="sweet-type" class="sweet-select">
                <option value="2.0">ã‚·ãƒ§ãƒ¼ãƒˆã‚±ãƒ¼ã‚­ (2.0ğŸ“)</option>
                <option value="3.0">ã„ã¡ã”ãƒ‘ãƒ•ã‚§ (3.0ğŸ“)</option>
                <option value="1.5">ã„ã¡ã”å¤§ç¦ (1.5ğŸ“)</option>
                <option value="1.2">ã„ã¡ã”ã‚¿ãƒ«ãƒˆ (1.2ğŸ“)</option>
                <option value="1.0">ã„ã¡ã”ãƒãƒ§ã‚³ (1.0ğŸ“)</option>
                <option value="0.8">ã„ã¡ã”ã‚¢ã‚¤ã‚¹/ã‚½ãƒ«ãƒ™ (0.8ğŸ“)</option>
                <option value="0.5">ã„ã¡ã”é£´/ã‚°ãƒŸ (0.5ğŸ“)</option>
                <option value="0.3">ã„ã¡ã”ã‚ªãƒ¬/é£²æ–™ (0.3ğŸ“)</option>
                <option value="0.1">ãã®ä»–ãƒ»å¾®é‡ (0.1ğŸ“)</option>
            </select>
        </div>
    </div>

    <button class="btn-main" onclick="judge()">æ‘‚å–é‡ã‚’å ±å‘Šã™ã‚‹</button>

    <div id="judgment-area">
        <div class="shogo" id="shogo-text"></div>
        <p id="comment-text" style="font-size:14px; color:#7a4a4a;"></p>
        <div id="rakuten-box" class="rakuten-area">
            <div id="rakuten-msg" style="font-size:12px; font-weight:bold; margin-bottom:8px;"></div>
            <a id="rakuten-url" href="" class="rakuten-link" target="_blank"></a>
        </div>
        <button onclick="shareOnX()" class="btn-share">
            <i class="fa-brands fa-x-twitter"></i> ãƒ©ãƒ³ã‚¯ã‚’å ±å‘Šã™ã‚‹
        </button>
    </div>

    <a href="ichigo_log.html" class="btn-nav">ğŸ—“ï¸ å±¥æ­´ã‚’è¦‹ã‚‹</a>
    <a href="index.html" style="color:#888; font-size:12px; text-decoration:none; margin-top:15px; display:inline-block;">ã‚¹ã‚¿ã‚¸ã‚ªã¸æˆ»ã‚‹</a>
</div>

<script>
    let counts = { raw: 0, jam: 0, sweet: 0 };
    function change(type, delta) { counts[type] = Math.max(0, counts[type] + delta); updateUI(); }
    function updateUI() { for(let k in counts) document.getElementById(k + '-count').innerText = counts[k]; }

    function judge() {
        const sweetMultiplier = parseFloat(document.getElementById('sweet-type').value);
        let total = (Number(counts.raw) * 1.0) + (Number(counts.jam) * 0.5) + (Number(counts.sweet) * sweetMultiplier);
        if (new Date().getDate() === 15) total *= 2;

        let shogo = "", rakutenText = "", rakutenUrl = "", rankClass = "";
        const normalUrl = "https://hb.afl.rakuten.co.jp/hgc/38bc4499.7d06e22c.38bc449a.2e400495/?pc=https%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2581%2584%25E3%2581%25A1%25E3%2581%2594%2F&link_type=hybrid_url";
        const premiumUrl = "https://hb.afl.rakuten.co.jp/hgc/38bc4499.7d06e22c.38bc449a.2e400495/?pc=https%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2F%25E3%2581%2582%25E3%2581%25BE%25E3%2581%258A%25E3%2581%2586%2B%25E3%2582%25AE%25E3%2583%2595%25E3%2583%2588%2F&link_type=hybrid_url";

        if (total >= 10) {
            shogo = "ã„ã¡ã”ã®åŒ–èº«";
            rakutenText = "âœ¨ ã•ã‚‰ãªã‚‹é«˜ã¿ã¸ï¼æœ€é«˜ç´šè‹ºã‚’å¬å–š âœ¨";
            rakutenUrl = premiumUrl;
            rankClass = "rank-gold";
        } else {
            shogo = total >= 5 ? "ã„ã¡ã”é¨å£«" : total >= 1 ? "ã„ã¡ã”æ„›å¥½å®¶" : "ã„ã¡ã”è¦‹ç¿’ã„";
            rakutenText = "ğŸ“ è¶³ã‚Šãªã„åˆ†ã‚’æ¥½å¤©ã§è£œçµ¦ã™ã‚‹ ğŸ“";
            rakutenUrl = normalUrl;
            rankClass = "rank-normal";
        }

        document.getElementById('shogo-text').innerText = "ã€" + shogo + "ã€‘";
        document.getElementById('comment-text').innerText = "ä»Šæ—¥ã®æ‘‚å–é‡ã¯ " + total.toFixed(1) + " ğŸ“ ã§ã—ãŸï¼";
        const rBox = document.getElementById('rakuten-box');
        rBox.className = "rakuten-area " + rankClass;
        document.getElementById('rakuten-msg').innerText = total >= 1 ? "ç´ æ™´ã‚‰ã—ã„æ‘‚å–é‡ã§ã™ï¼" : "ã‚‚ã£ã¨å¾³ã‚’ç©ã¿ã¾ã—ã‚‡ã†";
        document.getElementById('rakuten-url').innerText = rakutenText;
        document.getElementById('rakuten-url').href = rakutenUrl;
        document.getElementById('judgment-area').style.display = 'block';
        rBox.style.display = 'block';
        saveHistory(total, shogo);
    }

    function shareOnX() {
        const shogo = document.getElementById('shogo-text').innerText;
        const comment = document.getElementById('comment-text').innerText;
        const url = "https://jyonjyon-code.github.io/hirumeshi/ichigo.html";
        const text = `ã€ä»Šæ—¥ã‚¤ãƒã€‘\nç§ã®ç§°å·ã¯${shogo}ï¼\n${comment}\nãã¿ã¯ä»Šæ—¥ã„ã¡ã”ã‚’é£Ÿã¹ãŸã‹ï¼ŸğŸ“\n#ä»Šæ—¥ã‚¤ãƒ #ã„ã¡ã” #ã­ã“ãŸã‚¹ã‚¿ã‚¸ã‚ª`;
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
    }

    function saveHistory(total, shogo) {
        const now = new Date();
        const fullDateKey = `${now.getFullYear()}-${now.getMonth()+1}-${now.getDate()}`;
        let history = JSON.parse(localStorage.getItem('ichigo-history') || '[]');
        history = history.filter(h => h.fullDateKey !== fullDateKey);
        history.unshift({ date: `${now.getMonth()+1}/${now.getDate()}`, fullDateKey, shogo, score: Number(total.toFixed(1)) });
        localStorage.setItem('ichigo-history', JSON.stringify(history.slice(0, 31)));
    }
</script>
</body>
</html>
